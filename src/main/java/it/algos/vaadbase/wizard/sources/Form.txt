package it.algos.@MODULELOWER@.modules.@PACKAGE@;

import java.util.function.BiConsumer;
import java.util.function.Consumer;
import com.vaadin.flow.component.textfield.TextField;
import it.algos.vaadbase.annotation.AIScript;
import it.algos.vaadbase.presenter.IAPresenter;
import it.algos.vaadbase.ui.dialog.AForm;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;
import org.springframework.context.annotation.Lazy;
import org.springframework.context.annotation.Scope;
import static it.algos.@MODULELOWER@.application.@APPCOST@.@QUALIFIER@;

/**
 * Project @PROJECT@ <br>
 * Created by Algos
 * User: @USER@
 * Date: @TODAY@
 * Estende la Entity astratta AForm di tipo AView per visualizzare i fields
 * Annotated with @SpringComponent (obbligatorio)
 * Annotated with @Scope (obbligatorio = 'session')
 * Annotated with @Qualifier (obbligatorio) per permettere a Spring di istanziare la sottoclasse specifica
 * Annotated with @SpringView (obbligatorio) per gestire la visualizzazione di questa view con SprinNavigator
 * Annotated with @AIScript (facoltativo) per controllare la ri-creazione di questo file nello script del framework
 * Costruttore con un link @Autowired al IAPresenter, di tipo @Lazy per evitare un loop nella injection
 */
@Slf4j
@Scope(ConfigurableBeanFactory.SCOPE_SINGLETON)
@Qualifier(@QUALIFIER@)
@AIScript(sovrascrivibile = true)
public class @ENTITY@Form extends AForm {




    private final TextField roleCodeField = new TextField("Role Code");

    /**
     * Costruttore
     */
    public @ENTITY@Form(BiConsumer<@ENTITY@, AForm.Operation> itemSaver, Consumer<@ENTITY@> itemDeleter) {
        super("@ENTITY@", itemSaver, itemDeleter);

        creaCodeField();
    }// end of constructor

    private void creaCodeField() {
//        getFormLayout().add(roleCodeField);
//
//        getBinder().forField(roleCodeField)
//                .withConverter(String::trim, String::trim)
//                .withValidator(new StringLengthValidator(
//                        "Role name must contain at least 3 printable characters",
//                        3, null))
////                .withValidator(
////                        code -> RoleService.getInstance()
////                                .findByKeyUnica(code) == null,
////                        "Role name must be unique")
//                .bind(Role::getCode, Role::setCode);
    }// end of method

}// end of class

